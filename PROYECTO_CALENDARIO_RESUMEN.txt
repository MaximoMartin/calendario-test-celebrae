========================================
SISTEMA DE GESTIÃ“N DE RESERVAS - DOCUMENTACIÃ“N TÃ‰CNICA
========================================

DESCRIPCIÃ“N GENERAL
==================
AplicaciÃ³n completa de gestiÃ³n de reservas y turnos desarrollada con React 19, TypeScript y Tailwind CSS. 
DiseÃ±ada para negocios que ofrecen servicios con citas programadas como restaurantes, alquiler de vehÃ­culos, 
actividades turÃ­sticas, spas, etc.

TECNOLOGÃAS PRINCIPALES
=======================
- React 19 + TypeScript - Framework principal con tipado fuerte
- Tailwind CSS - Framework de estilos utilitarios
- React Big Calendar - Componente de calendario interactivo
- React Hook Form + Zod - GestiÃ³n y validaciÃ³n de formularios
- date-fns - ManipulaciÃ³n y formateo de fechas
- Lucide React - IconografÃ­a moderna
- Vite - Build tool y servidor de desarrollo

FUNCIONALIDADES PRINCIPALES
============================

1. CALENDARIO VISUAL INTERACTIVO
   - Vista por mes, semana y dÃ­a
   - Eventos con cÃ³digo de colores segÃºn estado de reserva
   - SelecciÃ³n de slots para crear nuevas reservas
   - Filtrado por servicio/kit especÃ­fico
   - NavegaciÃ³n intuitiva entre fechas

2. GESTIÃ“N INTEGRAL DE RESERVAS
   - CreaciÃ³n manual de reservas por parte del negocio
   - Estados: PENDING, CONFIRMED, CANCELLED, COMPLETED, NO_SHOW, RESCHEDULED, PARTIAL_REFUND
   - Validaciones automÃ¡ticas de horarios y capacidad
   - InformaciÃ³n completa del cliente (nombre, email, telÃ©fono)
   - Sistema de notas adicionales

3. CONFIGURACIÃ“N DE NEGOCIO
   - Horarios de atenciÃ³n por dÃ­a de la semana
   - MÃºltiples perÃ­odos de atenciÃ³n por dÃ­a (ej: maÃ±ana y tarde)
   - GestiÃ³n de servicios/kits con precios y capacidades
   - ConfiguraciÃ³n de slots de tiempo disponibles
   - LÃ­mites de reservas por slot

4. DASHBOARD Y ESTADÃSTICAS
   - Resumen de reservas por estado
   - Lista filtrable y ordenable de reservas
   - Acciones rÃ¡pidas (confirmar, cancelar, completar)
   - BÃºsqueda global avanzada

5. GESTIÃ“N AVANZADA
   - Manejo de excepciones (dÃ­as cerrados, eventos especiales)
   - GestiÃ³n de disponibilidad por perÃ­odos
   - Filtros mÃºltiples para bÃºsquedas complejas

ESTRUCTURA DE DATOS Y ENTIDADES
===============================

ENTIDADES PRINCIPALES:

User (Usuario)
- id: string
- name: string  
- email: string
- roles: ['SELLER', 'ADMIN', 'BUYER', 'ESSENTIAL']
- phoneNumber: string

Shop (Negocio/Tienda)
- id: string
- name: string
- address: string
- shopStatus: 'ENABLED' | 'DISABLED'
- userId: string
- businessHours: BusinessHours[]
- bookingSettings: BookingSettings

Kit (Servicio/Producto)
- id: string
- name: string
- price: number
- maxCapacity: number
- duration: number (en minutos)
- items: any[] (elementos incluidos)
- extras: any[] (extras opcionales)
- shopId: string
- slots: TimeSlot[]

Booking (Reserva)
- id: string
- kitId: string
- kitName: string
- shopId: string
- customerName: string
- customerEmail: string
- customerPhone: string
- date: string (formato ISO)
- timeSlot: string (formato HH:mm)
- numberOfPeople: number
- status: 'PENDING' | 'CONFIRMED' | 'CANCELLED' | 'COMPLETED' | 'NO_SHOW' | 'RESCHEDULED' | 'PARTIAL_REFUND'
- isManual: boolean (true si fue creada por el dueÃ±o)
- createdAt: string
- notes?: string
- rescheduledFrom?: string
- refundAmount?: number
- cancellationReason?: string

BusinessHours (Horarios de Negocio)
- dayOfWeek: number (0-6, Domingo-SÃ¡bado)
- isActive: boolean
- periods: BusinessHoursPeriod[] (mÃºltiples perÃ­odos por dÃ­a)

TimeSlot (Slot de Tiempo)
- id: string
- kitId: string
- startTime: string (formato HH:mm)
- endTime: string (formato HH:mm)
- maxBookings: number
- isActive: boolean

GESTIÃ“N ACTUAL DE RESERVAS
==========================

ALMACENAMIENTO:
- Los datos actualmente se almacenan en memoria usando React State
- Hook personalizado useBookings.ts gestiona todas las operaciones CRUD
- Datos iniciales se cargan desde mockData/index.ts

FLUJO DE CREACIÃ“N DE RESERVAS:
1. Usuario selecciona servicio/kit
2. Sistema valida disponibilidad segÃºn horarios de negocio
3. Se verifican conflictos con reservas existentes
4. Se aplican validaciones de capacidad mÃ¡xima
5. Se crea la reserva con estado PENDING por defecto
6. Se actualiza el calendario en tiempo real

VALIDACIONES IMPLEMENTADAS:
- No reservas en fechas pasadas
- Respeto de horarios de atenciÃ³n del negocio
- VerificaciÃ³n de capacidad mÃ¡xima por slot
- ValidaciÃ³n de horas mÃ­nimas de anticipaciÃ³n
- LÃ­mite de dÃ­as mÃ¡ximos de anticipaciÃ³n
- VerificaciÃ³n de disponibilidad de slots

DATOS PARA FUNCIONAMIENTO
=========================

DATOS DE PRUEBA INCLUIDOS:

1. USUARIO MOCK:
   - Maxi Martin Lanfranchi (maximo.martinl@hotmail.com)
   - Roles: SELLER, BUYER, ADMIN, ESSENTIAL
   - TelÃ©fono: 3515050672

2. NEGOCIOS DE PRUEBA (3):
   a) "La vuelta del Maxi" (TurÃ­n, Italia)
      - Enfoque: Ofertas/Descuentos, RelajaciÃ³n y bienestar
      - Servicios: Alquiler autos ParÃ­s, Spa Day Premium, Cata de Vinos VIP
      
   b) "CafÃ© Delicias" (Centro ciudad)
      - Enfoque: Al mediodÃ­a, A la noche
      - Servicios: Brunch Especial, Cena RomÃ¡ntica, Clase Barista
      
   c) "El mono Ã©pico editado" (CÃ³rdoba, Argentina)
      - Enfoque: Al mediodÃ­a
      - Servicios: Almuerzo Ã‰pico, Experiencia Mono

3. SERVICIOS CONFIGURADOS:
   - Cada servicio tiene precio, capacidad mÃ¡xima, duraciÃ³n
   - Slots de tiempo predefinidos con lÃ­mites de reservas
   - Horarios especÃ­ficos segÃºn el tipo de negocio

4. RESERVAS DE EJEMPLO:
   - Reservas en diferentes estados para pruebas
   - Diferentes clientes y servicios
   - Fechas variadas para testing del calendario

DIRECTORIO DEL PROYECTO
=======================

calendar-test/
â”œâ”€â”€ public/
â”‚   â””â”€â”€ vite.svg
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/              # Componentes React
â”‚   â”‚   â”œâ”€â”€ ui/                 # Componentes base reutilizables
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx      # BotÃ³n estilizado
â”‚   â”‚   â”‚   â”œâ”€â”€ Input.tsx       # Campo de entrada
â”‚   â”‚   â”‚   â”œâ”€â”€ Select.tsx      # Selector dropdown
â”‚   â”‚   â”‚   â””â”€â”€ Card.tsx        # Tarjeta contenedora
â”‚   â”‚   â”œâ”€â”€ AvailabilityManager.tsx    # GestiÃ³n de disponibilidad avanzada
â”‚   â”‚   â”œâ”€â”€ BookingCalendar.tsx        # Calendario principal interactivo
â”‚   â”‚   â”œâ”€â”€ BookingDetailModal.tsx     # Modal de detalles de reserva
â”‚   â”‚   â”œâ”€â”€ BookingForm.tsx            # Formulario de creaciÃ³n/ediciÃ³n
â”‚   â”‚   â”œâ”€â”€ BookingList.tsx            # Lista filtrable de reservas
â”‚   â”‚   â”œâ”€â”€ BookingStats.tsx           # Dashboard de estadÃ­sticas
â”‚   â”‚   â”œâ”€â”€ BusinessHoursForm.tsx      # ConfiguraciÃ³n de horarios
â”‚   â”‚   â”œâ”€â”€ ExceptionManager.tsx       # GestiÃ³n de excepciones
â”‚   â”‚   â””â”€â”€ GlobalSearch.tsx           # BÃºsqueda global avanzada
â”‚   â”œâ”€â”€ hooks/                  # Custom hooks
â”‚   â”‚   â”œâ”€â”€ useBookings.ts      # Hook principal de gestiÃ³n de reservas
â”‚   â”‚   â””â”€â”€ useGlobalSearch.ts  # Hook para bÃºsqueda global
â”‚   â”œâ”€â”€ utils/                  # Utilidades
â”‚   â”‚   â””â”€â”€ dateHelpers.ts      # Helpers para fechas y validaciones
â”‚   â”œâ”€â”€ types/                  # Definiciones TypeScript
â”‚   â”‚   â””â”€â”€ index.ts            # Tipos principales del sistema
â”‚   â”œâ”€â”€ mockData/               # Datos de ejemplo
â”‚   â”‚   â””â”€â”€ index.ts            # Mock data completo
â”‚   â”œâ”€â”€ App.tsx                 # Componente principal de la aplicaciÃ³n
â”‚   â”œâ”€â”€ main.tsx                # Punto de entrada de React
â”‚   â”œâ”€â”€ index.css               # Estilos globales con Tailwind
â”‚   â””â”€â”€ vite-env.d.ts          # Tipos para Vite
â”œâ”€â”€ package.json                # Dependencias y scripts
â”œâ”€â”€ vite.config.ts             # ConfiguraciÃ³n de Vite
â”œâ”€â”€ tailwind.config.js         # ConfiguraciÃ³n de Tailwind CSS
â”œâ”€â”€ tsconfig.json              # ConfiguraciÃ³n TypeScript
â”œâ”€â”€ eslint.config.js           # ConfiguraciÃ³n ESLint
â””â”€â”€ README.md                  # DocumentaciÃ³n del proyecto

SCRIPTS DISPONIBLES
===================
- yarn dev      # Inicia servidor de desarrollo
- yarn build    # Construye para producciÃ³n
- yarn lint     # Ejecuta linter
- yarn preview  # Vista previa de build

CARACTERÃSTICAS TÃ‰CNICAS
========================

RESPONSIVIDAD:
- DiseÃ±o completamente responsive
- NavegaciÃ³n mÃ³vil con menÃº hamburguesa
- AdaptaciÃ³n de interfaz segÃºn tamaÃ±o de pantalla

ARQUITECTURA:
- Arquitectura basada en componentes reutilizables
- SeparaciÃ³n clara de responsabilidades
- Hooks personalizados para lÃ³gica de negocio
- Tipado fuerte con TypeScript

GESTIÃ“N DE ESTADO:
- Estado local con React hooks (useState, useCallback, useMemo)
- Hook personalizado useBookings centraliza la gestiÃ³n
- Estado inmutable con operaciones funcionales

VALIDACIONES:
- ValidaciÃ³n de formularios con Zod schemas
- Validaciones de negocio en dateHelpers.ts
- Feedback visual de errores en tiempo real

INTERFAZ DE USUARIO:
- Sistema de diseÃ±o consistente con componentes UI
- Colores semÃ¡nticos para estados de reservas
- Indicadores de carga y estados vacÃ­os
- NavegaciÃ³n intuitiva por pestaÃ±as

NOTAS PARA DESARROLLO
====================
- El proyecto estÃ¡ configurado con ESLint para mantener calidad de cÃ³digo
- Usa Vite para desarrollo rÃ¡pido y builds optimizados
- Toda la lÃ³gica de fechas estÃ¡ centralizada en dateHelpers.ts
- Los componentes UI son reutilizables y temÃ¡ticamente consistentes
- Los tipos TypeScript estÃ¡n bien definidos para evitar errores

CONTEXTO ACTUAL
===============
- Proyecto en rama "second-version"
- Estado limpio sin cambios pendientes
- Todos los datos son mock data para desarrollo
- Preparado para integraciÃ³n con backend real
- Interface completamente funcional para testing y demo

Este proyecto representa una base sÃ³lida para un sistema de gestiÃ³n de reservas
completo, con todas las funcionalidades esenciales implementadas y una 
arquitectura escalable para futuras mejoras. 


===============

PROMPT ORIGINAL

Sistema de GestiÃ³n de Reservas con bundles/items/extras y lÃ³gica real de disponibilidad (con desarrollo por etapas)

Estoy desarrollando una aplicaciÃ³n de gestiÃ³n de reservas para negocios como restaurantes, spas, experiencias turÃ­sticas, etc. El proyecto se llama calendar-test, estÃ¡ desarrollado con React 19 + TypeScript + Tailwind CSS y ya cuenta con una arquitectura funcional avanzada para:

GestiÃ³n de horarios de atenciÃ³n

Slots por kit/servicio

Formulario de creaciÃ³n y validaciÃ³n de reservas

Calendario visual (React Big Calendar)

Dashboard con estados y acciones

Detalle y ediciÃ³n de reservas

BÃºsqueda global y filtros

Toda la lÃ³gica funciona con datos mock en memoria, organizada con useBookings.ts, BookingCalendar.tsx, BookingForm.tsx, etc.

ğŸ§© ESTRUCTURA ACTUAL DE RESERVAS
Mi app maneja una jerarquÃ­a clara:

scss
Copiar
Editar
User
  â””â”€ Shop (Negocio)
       â””â”€ Bundles
            â”œâ”€ Items (actividad principal con precio, capacidad, horario)
            â””â”€ Extras (opcionales, sin horario)
Cada bundle representa una experiencia global (ej: "Tour GastronÃ³mico en Barcelona") pero los horarios dependen de los items que contiene (ej: cada parada del tour). Los extras no tienen horarios.

âš ï¸ PROBLEMA CONCEPTUAL ACTUAL
El sistema actual asigna horarios a las reservas como si pertenecieran al bundle, lo cual es un error de diseÃ±o. En realidad, cada item dentro del bundle tiene su propio horario especÃ­fico, y la reserva deberÃ­a reflejar eso. Ejemplo real:

El bundle â€œDÃ­a de Campoâ€ incluye desayuno (9-10), cabalgata (10:30-11:30), y asado (13-14:30). Cada una de estas actividades (items) tiene una duraciÃ³n, capacidad y recursos asociados (guÃ­as, cocineros, salas, etc.).

ğŸ¯ LO QUE NECESITAMOS DE TU RESPUESTA
Queremos adaptar el sistema para que:

1. ğŸ§± MODELO DE DATOS Ã“PTIMO
DiseÃ±es un esquema de datos ideal y escalable que permita:

Asignar horarios exclusivamente a los items

Mantener la relaciÃ³n bundle â†’ items â†’ extras

Manejar recursos compartidos (ej: una sala o un fotÃ³grafo no puede usarse dos veces al mismo horario)

Calcular disponibilidad en base a stock, ocupaciÃ³n y solapamientos

IncluÃ­ los campos que consideres necesarios (como recursos, bloqueos, dependencias, duraciÃ³n real, etc).

2. âš™ï¸ LÃ“GICA DE RESERVAS ROBUSTA
DescribÃ­ cÃ³mo deberÃ­a funcionar un motor de reservas que permita:

Verificar si un item estÃ¡ disponible en un horario especÃ­fico

Bloquear slots si los recursos estÃ¡n ocupados (ej: una sala usada por otro item)

Validar lÃ­mites por persona, capacidad y horario

Aplicar reglas como anticipaciÃ³n mÃ­nima, dÃ­as de cierre, etc.

3. ğŸ“… CALENDARIO INTELIGENTE Y ADAPTABLE
Ayudanos a redefinir el funcionamiento del BookingCalendar para:

Mostrar los items en el calendario, no el bundle

Permitir clic para ver el detalle completo de la reserva

Filtrar por shop, kit o estado

Visualizar conflictos de disponibilidad

Crear reservas manuales desde el calendario (con validaciones en tiempo real)

4. ğŸ” FUNCIONES NICE TO HAVE (YA IMPLEMENTADAS PERO A MEJORAR)
Queremos que el nuevo sistema sea compatible con funciones de valor agregado ya presentes:

Buscador global por cliente, servicio, estado

Filtros por fecha, negocio, kit o estado

Detalle y ediciÃ³n de reservas desde el calendario

CreaciÃ³n manual de reservas por el dueÃ±o del negocio

Acciones rÃ¡pidas sobre cada reserva (confirmar, cancelar, reagendar, anotar)

ğŸ“Œ CONTEXTO TÃ‰CNICO DEL PROYECTO
Estado actual: funcional, con arquitectura modular, usando estado local (sin backend aÃºn).

Herramientas clave: React Big Calendar, Zod, date-fns, React Hook Form, Vite.

Componentes: BookingForm, BusinessHoursForm, BookingCalendar, BookingList, BookingStats, AvailabilityManager.

Tipado fuerte con types/index.ts.

âœ… OBJETIVO FINAL
Una soluciÃ³n completa, realista y escalable para:

Gestionar reservas basadas en items dentro de bundles

Respetar la jerarquÃ­a y lÃ³gica de uso real de recursos

Evitar conflictos, duplicaciones y reservas incorrectas

Brindar al usuario final una UI fluida, confiable y profesional

ğŸ” MODO DE ENTREGA
PodÃ©s desarrollar esta soluciÃ³n en partes (checkpoints), no es necesario resolver todo en una sola respuesta.

Por ejemplo:

Empezar con el rediseÃ±o del modelo de datos

Luego proponer la lÃ³gica de disponibilidad

DespuÃ©s adaptar el calendario

Finalmente incorporar validaciones y funciones adicionales

EsperÃ¡ mi confirmaciÃ³n o feedback despuÃ©s de cada parte antes de continuar.
Esto nos permitirÃ¡ trabajar de forma precisa, colaborativa y alineada con el estado real del proyecto.

